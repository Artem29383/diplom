{"ast":null,"code":"var _jsxFileName = \"/Users/artemaveranov/diplom/client/src/pages/Contact/Form/Form.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport useResolver from \"../../../hooks/useResolver\";\nimport VisualForm from \"./VisualForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Form = () => {\n  _s();\n\n  const formSchema = yup.object().shape({\n    name: yup.string().required('Имя обязательно'),\n    email: yup.string().required('E-mail обязателен').email('Вы ввели не e-mail'),\n    message: yup.string().required('Заполните сообщение')\n  });\n  const resolver = useResolver(formSchema);\n  const {\n    register,\n    handleSubmit,\n    errors,\n    reset,\n    watch,\n    setValue,\n    clearErrors\n  } = useForm({\n    mode: 'onSubmit',\n    resolver,\n    shouldFocusError: false\n  });\n  const name = watch('name');\n  const email = watch('email');\n  const message = watch('message');\n  useEffect(() => {\n    if (errors.email && email.trim()) {\n      clearErrors('email');\n    }\n\n    if (errors.name && name.trim()) {\n      clearErrors('name');\n    }\n\n    if (errors.message && message.trim()) {\n      clearErrors('message');\n    }\n  }, [name, email, message]);\n  useEffect(() => {\n    if (errors.name || errors.message || errors.email) {\n      if (errors.name) {\n        setValue('name', '');\n      }\n\n      if (errors.message) {\n        setValue('message', '');\n      }\n\n      if (errors.email) {\n        setValue('email', '');\n      }\n    }\n  }, [errors.name, errors.message, errors.email]);\n  const submit = useCallback(data => {\n    fetch(`/api/messages?email=${data.email}&text=${data.message}&name=${data.name}`).then(res => {\n      console.info(res);\n      return res.json();\n    }).then(res => console.log(res)).catch(err => console.log(err));\n    reset();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(VisualForm, { ...errors,\n    handleSubmit: handleSubmit,\n    register: register,\n    submit: submit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Form, \"RXpHaN9FJnZN6jip44Lf6Xs5j3M=\", false, function () {\n  return [useResolver, useForm];\n});\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/artemaveranov/diplom/client/src/pages/Contact/Form/Form.jsx"],"names":["React","useEffect","useCallback","useForm","yup","useResolver","VisualForm","Form","formSchema","object","shape","name","string","required","email","message","resolver","register","handleSubmit","errors","reset","watch","setValue","clearErrors","mode","shouldFocusError","trim","submit","data","fetch","then","res","console","info","json","log","catch","err"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport useResolver from \"../../../hooks/useResolver\";\nimport VisualForm from \"./VisualForm\";\n\nconst Form = () => {\n  const formSchema = yup.object().shape({\n    name: yup.string().required('Имя обязательно'),\n    email: yup\n      .string()\n      .required('E-mail обязателен')\n      .email('Вы ввели не e-mail'),\n    message: yup.string().required('Заполните сообщение'),\n  });\n\n  const resolver = useResolver(formSchema);\n  const {\n    register,\n    handleSubmit,\n    errors,\n    reset,\n    watch,\n    setValue,\n    clearErrors,\n  } = useForm({\n    mode: 'onSubmit',\n    resolver,\n    shouldFocusError: false,\n  });\n\n  const name = watch('name');\n  const email = watch('email');\n  const message = watch('message');\n\n  useEffect(() => {\n    if (errors.email && email.trim()) {\n      clearErrors('email');\n    }\n    if (errors.name && name.trim()) {\n      clearErrors('name');\n    }\n    if (errors.message && message.trim()) {\n      clearErrors('message');\n    }\n  }, [name, email, message]);\n\n  useEffect(() => {\n    if (errors.name || errors.message || errors.email) {\n      if (errors.name) {\n        setValue('name', '');\n      }\n      if (errors.message) {\n        setValue('message', '');\n      }\n      if (errors.email) {\n        setValue('email', '');\n      }\n    }\n  }, [errors.name, errors.message, errors.email]);\n\n  const submit = useCallback(data => {\n    fetch(\n      `/api/messages?email=${data.email}&text=${data.message}&name=${data.name}`\n    )\n      .then(res => {\n        console.info(res)\n        return res.json();\n      })\n      .then(res => console.log(res))\n      .catch(err => console.log(err));\n    reset();\n  }, []);\n\n  return (\n    <VisualForm\n      {...errors}\n      handleSubmit={handleSubmit}\n      register={register}\n      submit={submit}\n    />\n  );\n};\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}