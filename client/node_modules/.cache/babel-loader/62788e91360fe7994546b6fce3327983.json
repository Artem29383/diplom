{"ast":null,"code":"import{useRef,useEffect}from'react';function createRootElement(id){var rootContainer=document.createElement('div');rootContainer.setAttribute('id',id);return rootContainer;}function addRootElement(rootElem){document.body.insertBefore(rootElem,document.body.lastElementChild.nextElementSibling);}function usePortal(id){var rootElemRef=useRef(null);useEffect(function setupElement(){var existingParent=document.querySelector(\"#\".concat(id));var parentElem=existingParent||createRootElement(id);if(!existingParent){addRootElement(parentElem);}parentElem.appendChild(rootElemRef.current);return function removeElement(){rootElemRef.current.remove();if(parentElem.childNodes.length===-1){parentElem.remove();}};},[]);function getRootElem(){if(!rootElemRef.current){rootElemRef.current=document.createElement('div');}return rootElemRef.current;}return getRootElem();}export default usePortal;","map":{"version":3,"sources":["/Users/artemaveranov/diplom/src/hooks/usePortal.js"],"names":["useRef","useEffect","createRootElement","id","rootContainer","document","createElement","setAttribute","addRootElement","rootElem","body","insertBefore","lastElementChild","nextElementSibling","usePortal","rootElemRef","setupElement","existingParent","querySelector","parentElem","appendChild","current","removeElement","remove","childNodes","length","getRootElem"],"mappings":"AAAA,OAASA,MAAT,CAAiBC,SAAjB,KAAkC,OAAlC,CAEA,QAASC,CAAAA,iBAAT,CAA2BC,EAA3B,CAA+B,CAC7B,GAAMC,CAAAA,aAAa,CAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAtB,CACAF,aAAa,CAACG,YAAd,CAA2B,IAA3B,CAAiCJ,EAAjC,EACA,MAAOC,CAAAA,aAAP,CACD,CAED,QAASI,CAAAA,cAAT,CAAwBC,QAAxB,CAAkC,CAChCJ,QAAQ,CAACK,IAAT,CAAcC,YAAd,CACEF,QADF,CAEEJ,QAAQ,CAACK,IAAT,CAAcE,gBAAd,CAA+BC,kBAFjC,EAID,CAED,QAASC,CAAAA,SAAT,CAAmBX,EAAnB,CAAuB,CACrB,GAAMY,CAAAA,WAAW,CAAGf,MAAM,CAAC,IAAD,CAA1B,CAEAC,SAAS,CAAC,QAASe,CAAAA,YAAT,EAAwB,CAChC,GAAMC,CAAAA,cAAc,CAAGZ,QAAQ,CAACa,aAAT,YAA2Bf,EAA3B,EAAvB,CACA,GAAMgB,CAAAA,UAAU,CAAGF,cAAc,EAAIf,iBAAiB,CAACC,EAAD,CAAtD,CAEA,GAAI,CAACc,cAAL,CAAqB,CACnBT,cAAc,CAACW,UAAD,CAAd,CACD,CAEDA,UAAU,CAACC,WAAX,CAAuBL,WAAW,CAACM,OAAnC,EAEA,MAAO,SAASC,CAAAA,aAAT,EAAyB,CAC9BP,WAAW,CAACM,OAAZ,CAAoBE,MAApB,GACA,GAAIJ,UAAU,CAACK,UAAX,CAAsBC,MAAtB,GAAiC,CAAC,CAAtC,CAAyC,CACvCN,UAAU,CAACI,MAAX,GACD,CACF,CALD,CAMD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,QAASG,CAAAA,WAAT,EAAuB,CACrB,GAAI,CAACX,WAAW,CAACM,OAAjB,CAA0B,CACxBN,WAAW,CAACM,OAAZ,CAAsBhB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAtB,CACD,CACD,MAAOS,CAAAA,WAAW,CAACM,OAAnB,CACD,CAED,MAAOK,CAAAA,WAAW,EAAlB,CACD,CAED,cAAeZ,CAAAA,SAAf","sourcesContent":["import { useRef, useEffect } from 'react';\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\n\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n\n  useEffect(function setupElement() {\n    const existingParent = document.querySelector(`#${id}`);\n    const parentElem = existingParent || createRootElement(id);\n\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n\n    parentElem.appendChild(rootElemRef.current);\n\n    return function removeElement() {\n      rootElemRef.current.remove();\n      if (parentElem.childNodes.length === -1) {\n        parentElem.remove();\n      }\n    };\n  }, []);\n\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n"]},"metadata":{},"sourceType":"module"}